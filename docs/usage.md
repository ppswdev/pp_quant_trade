# 使用指南

## 一、系统简介

这是一个量化交易系统，可以帮助您：
1. 自动获取股票数据
2. 运行交易策略
3. 进行回测分析
4. 执行实盘交易

## 二、系统架构

系统由以下主要部分组成：
1. 数据获取：从各个数据源获取股票数据
2. 策略引擎：运行交易策略
3. 回测系统：进行历史数据回测
4. 交易系统：执行实盘交易
5. 风险控制：控制交易风险
6. 性能分析：分析交易结果
7. 可视化：展示交易数据
8. 日志系统：记录系统运行情况

## 三、使用流程

### 1. 获取数据
1. 选择数据源（如Tushare）
2. 配置数据源账号
3. 获取历史数据或实时数据

### 2. 选择策略
系统内置多种策略：
1. 均线交叉策略
   - 短期均线上穿长期均线时买入
   - 短期均线下穿长期均线时卖出

2. 突破策略
   - 价格突破上轨时买入
   - 价格突破下轨时卖出

3. 均值回归策略
   - 价格偏离均值过大时买入
   - 价格回归均值时卖出

### 3. 运行回测
1. 选择回测时间段
2. 选择交易策略
3. 设置初始资金
4. 运行回测
5. 查看回测结果

### 4. 实盘交易
1. 选择券商接口
2. 配置交易账户
3. 设置风险控制参数
4. 启动交易系统
5. 监控交易情况

## 四、具体操作

### 1. 运行回测
```bash
# 运行均线交叉策略的回测
python -m src.backtest.run_backtest --strategy ma_cross --start_date 2020-01-01 --end_date 2023-12-31
```

### 2. 查看回测结果
- 打开 `results/backtest_report.html` 查看回测报告
- 查看 `results/` 目录下的其他分析文件

### 3. 实盘交易
```bash
# 使用均线交叉策略进行实盘交易
python -m src.trading.run_trading --strategy ma_cross --broker xtp
```

## 五、风险控制

### 1. 资金控制
- 设置最大持仓金额
- 设置单笔交易限额
- 设置止损止盈点

### 2. 持仓控制
- 设置最大持仓数量
- 设置单个股票持仓比例
- 设置行业持仓比例

### 3. 风险监控
- 监控回撤情况
- 监控波动率
- 监控相关性

## 六、日志管理

### 1. 查看日志
- 系统日志：`logs/system.log`
- 交易日志：`logs/trading.log`
- 错误日志：`logs/error.log`

### 2. 日志级别
- DEBUG：调试信息
- INFO：一般信息
- WARNING：警告信息
- ERROR：错误信息
- CRITICAL：严重错误

## 七、最佳实践

### 1. 策略开发
- 先进行充分的回测
- 注意风险控制
- 避免过度拟合
- 定期优化策略

### 2. 实盘交易
- 先用小资金测试
- 密切监控系统运行
- 及时处理异常情况
- 定期检查风险指标

### 3. 系统维护
- 定期更新数据
- 检查系统日志
- 备份重要数据
- 更新依赖包

## 八、常见问题

### 1. 数据问题
- 数据获取失败
- 数据格式错误
- 数据延迟

### 2. 交易问题
- 下单失败
- 撤单失败
- 持仓异常

### 3. 系统问题
- 系统崩溃
- 内存不足
- 网络断开

## 九、获取帮助

- 查看详细文档：`docs/` 目录
- 提交问题：在GitHub上创建Issue
- 加入讨论：项目Discussions页面 